<!--
  Grabbed from https://icfpcontest2018.github.io/lgtn/exec-trace.html
  and modified to use hardcoded model data.
-->

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/static/assets/css/style.css?v=fad0f815184a4c51c41b858d1100c63393da3180" media="screen" type="text/css">
    <!-- <link rel="stylesheet" href="/static/assets/css/print.css" media="print" type="text/css"> -->

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Execute Trace (Lightning) | ICFP Programming Contest 2018</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Execute Trace (Lightning)" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://icfpcontest2018.github.io/lgtn/exec-trace.html" />
<meta property="og:url" content="https://icfpcontest2018.github.io/lgtn/exec-trace.html" />
<meta property="og:site_name" content="ICFP Programming Contest 2018" />
<script type="application/ld+json">
{"@type":"WebPage","url":"https://icfpcontest2018.github.io/lgtn/exec-trace.html","headline":"Execute Trace (Lightning)","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <header>
      <div class="inner">
        <a href="https://icfpcontest2018.github.io/index.html">
          <h1>ICFP Programming Contest 2018</h1>
        </a>
        <!-- <h2>ICFP Programming Contest 2018 (website)</h2> -->
        
        
      </div>
    </header>


    <div id="content-wrapper">
      <div class="wide-inner clearfix">
        <section id="main-content" style="width: 100%;">
          <h1 id="execute-trace-lightning">Execute Trace (Lightning)</h1>

<form>

<p>
<label for="tgtModelFileIn">Target Model:</label><br />
<input type="file" accept=".mdl" id="tgtModelFileIn" />
</p>

<p>
<label for="traceFileIn">Trace:</label><br />
<input accept=".nbt" type="file" id="traceFileIn" />
</p>


<p>
<label for="stepsPerFrame">Steps per Frame:</label><br />
<select id="stepsPerFrame">
<option value="-60">1/60</option>
<option value="-30">1/30</option>
<option selected="" value="1">1</option>
<option value="10">10</option>
<option value="50">50</option>
<option value="100">100</option>
<option value="500">500</option>
<option value="1000">1000</option>
</select>
</p>


<p>
<input type="button" id="execTrace" value="Execute Trace" disabled="" />
</p>

</form>

<hr />

<div id="glcanvas_container" style="position: relative;">
  <canvas id="glcanvas" tabindex="0" />
</div>

<hr />

<pre id="stdout"></pre>

<script>
var vis = null;
</script>

<script src="/static/assets/js/three.min.js"></script>

<script src="/static/assets/js/Detector.js"></script>

<script src="/static/assets/js/stats.min.js"></script>

<script src="/static/assets/js/visualizer.js"></script>

<script>
(function () {
  if (! Detector.webgl) {
    const glcanvasContainer = document.getElementById('glcanvas_container');
    const glcanvas = document.getElementById('glcanvas');
    glcanvasContainer.removeChild(glcanvas);
    var warning = Detector.getWebGLErrorMessage();
    glcanvasContainer.appendChild(warning);
  } else {
    vis = initVisualizer({stats: true, screenshot: true, controls: true});
  }
})();
</script>

<script src="/static/assets/js/load-file-utils.js"></script>

<script>
var tgtModelBData = null;
var traceBData = null;
(function () {
  var execTrace = document.getElementById('execTrace');
  function onStart() {
    document.getElementById('stdout').innerHTML = "";
    if (vis) { vis.setSize(8, 8, 8); };
    execTrace.disabled = true;
  }
  function onSuccess() {
    if (tgtModelBData && traceBData) {
      execTrace.disabled = false;
    }
  }
  tgtModelBData = new Uint8Array({{ model_data }});
  traceBData = new Uint8Array({{ trace_data }});

  window.onload = onSuccess;
})()
</script>

<script src="/static/assets/js/exec-trace.js"></script>


        </section>
      </div>
    </div>

    

  </body>
</html>

